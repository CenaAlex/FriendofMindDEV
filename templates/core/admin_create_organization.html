{% extends 'base.html' %}

{% block title %}Create Organization - Admin Panel{% endblock %}

{% block content %}
<div class="min-h-screen -mt-16 pt-16 bg-gradient-to-br from-primary via-secondary to-primary">
    <div class="max-w-6xl mx-auto px-8 sm:px-12 lg:px-16 py-8">

        <!-- Header Section -->
        <div class="mb-8">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-4xl font-bold text-white mb-2">Create Organization Account</h1>
                    <p class="text-xl text-white opacity-90">Manually create a new mental health organization account</p>
                </div>
                <div class="flex space-x-4">
                    <a href="{% url 'core:admin_organization_management' %}" class="bg-white bg-opacity-20 text-white px-6 py-3 rounded-lg hover:bg-opacity-30 transition duration-300">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Organizations
                    </a>
                    <a href="{% url 'core:admin_dashboard' %}" class="bg-white bg-opacity-20 text-white px-6 py-3 rounded-lg hover:bg-opacity-30 transition duration-300">
                        <i class="fas fa-tachometer-alt mr-2"></i>Admin Dashboard
                    </a>
                </div>
            </div>
        </div>

        <!-- Form Section -->
        <div class="bg-white bg-opacity-20 backdrop-blur-sm rounded-lg shadow-lg p-8">
            <form method="post" class="space-y-8">
                {% csrf_token %}
                
                {% if form.non_field_errors %}
                    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                        {{ form.non_field_errors }}
                    </div>
                {% endif %}

                <!-- User Account Section -->
                <div class="bg-white bg-opacity-10 rounded-lg p-6">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-user-circle mr-3"></i>
                        User Account Information
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="{{ form.username.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Username *
                            </label>
                            {{ form.username }}
                            {% if form.username.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.username.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.username.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.email.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Email Address *
                            </label>
                            {{ form.email }}
                            {% if form.email.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.email.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.email.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.first_name.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                First Name *
                            </label>
                            {{ form.first_name }}
                            {% if form.first_name.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.first_name.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.first_name.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.last_name.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Last Name *
                            </label>
                            {{ form.last_name }}
                            {% if form.last_name.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.last_name.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.last_name.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.phone.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Phone Number *
                            </label>
                            {{ form.phone }}
                            {% if form.phone.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.phone.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.phone.help_text }}</div>
                        </div>

                        <div></div> <!-- Empty div for grid spacing -->

                        <div>
                            <label for="{{ form.password.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Password *
                            </label>
                            {{ form.password }}
                            {% if form.password.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.password.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.password.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.password_confirm.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Confirm Password *
                            </label>
                            {{ form.password_confirm }}
                            {% if form.password_confirm.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.password_confirm.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.password_confirm.help_text }}</div>
                        </div>
                    </div>
                </div>

                <!-- Organization Profile Section -->
                <div class="bg-white bg-opacity-10 rounded-lg p-6">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-building mr-3"></i>
                        Organization Information
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="{{ form.organization_name.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Organization Name *
                            </label>
                            {{ form.organization_name }}
                            {% if form.organization_name.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.organization_name.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.organization_name.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.organization_type.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Organization Type *
                            </label>
                            {{ form.organization_type }}
                            {% if form.organization_type.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.organization_type.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.organization_type.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.license_number.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                License Number
                            </label>
                            {{ form.license_number }}
                            {% if form.license_number.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.license_number.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.license_number.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.organization_phone.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Organization Phone *
                            </label>
                            {{ form.organization_phone }}
                            {% if form.organization_phone.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.organization_phone.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.organization_phone.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.organization_email.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Organization Email *
                            </label>
                            {{ form.organization_email }}
                            {% if form.organization_email.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.organization_email.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.organization_email.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.website.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Website
                            </label>
                            {{ form.website }}
                            {% if form.website.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.website.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.website.help_text }}</div>
                        </div>
                    </div>
                </div>

                <!-- Address Section -->
                <div class="bg-white bg-opacity-10 rounded-lg p-6">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-map-marker-alt mr-3"></i>
                        Address Information
                    </h2>
                    
                    <div class="grid grid-cols-1 gap-6">
                        <div>
                            <label for="{{ form.address.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Street Address *
                            </label>
                            {{ form.address }}
                            {% if form.address.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.address.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.address.help_text }}</div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                            <div>
                                <label for="{{ form.city.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                    City *
                                </label>
                                {{ form.city }}
                                {% if form.city.errors %}
                                    <div class="text-red-300 text-sm mt-1">{{ form.city.errors.0 }}</div>
                                {% endif %}
                            </div>

                            <div>
                                <label for="{{ form.state.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                    State/Province *
                                </label>
                                {{ form.state }}
                                {% if form.state.errors %}
                                    <div class="text-red-300 text-sm mt-1">{{ form.state.errors.0 }}</div>
                                {% endif %}
                            </div>

                            <div>
                                <label for="{{ form.zip_code.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                    ZIP Code *
                                </label>
                                {{ form.zip_code }}
                                {% if form.zip_code.errors %}
                                    <div class="text-red-300 text-sm mt-1">{{ form.zip_code.errors.0 }}</div>
                                {% endif %}
                            </div>

                            <div>
                                <label for="{{ form.country.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                    Country *
                                </label>
                                {{ form.country }}
                                {% if form.country.errors %}
                                    <div class="text-red-300 text-sm mt-1">{{ form.country.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Services Section -->
                <div class="bg-white bg-opacity-10 rounded-lg p-6">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-heart mr-3"></i>
                        Services & Operations
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="md:col-span-2">
                            <label for="{{ form.description.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Organization Description
                            </label>
                            {{ form.description }}
                            {% if form.description.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.description.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.description.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.services_offered.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Services Offered
                            </label>
                            {{ form.services_offered }}
                            {% if form.services_offered.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.services_offered.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.services_offered.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.operating_hours.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Operating Hours
                            </label>
                            {{ form.operating_hours }}
                            {% if form.operating_hours.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.operating_hours.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.operating_hours.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.insurance_accepted.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Insurance Accepted
                            </label>
                            {{ form.insurance_accepted }}
                            {% if form.insurance_accepted.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.insurance_accepted.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.insurance_accepted.help_text }}</div>
                        </div>

                        <div>
                            <label for="{{ form.languages_spoken.id_for_label }}" class="block text-sm font-medium text-white mb-2">
                                Languages Spoken *
                            </label>
                            {{ form.languages_spoken }}
                            {% if form.languages_spoken.errors %}
                                <div class="text-red-300 text-sm mt-1">{{ form.languages_spoken.errors.0 }}</div>
                            {% endif %}
                            <div class="text-gray-300 text-xs mt-1">{{ form.languages_spoken.help_text }}</div>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div class="bg-white bg-opacity-10 rounded-lg p-6">
                    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                        <i class="fas fa-cogs mr-3"></i>
                        Account Settings
                    </h2>
                    
                    <div class="space-y-4">
                        <div class="flex items-center">
                            {{ form.emergency_services }}
                            <label for="{{ form.emergency_services.id_for_label }}" class="ml-3 text-white">
                                {{ form.emergency_services.label }}
                            </label>
                            <div class="ml-2 text-gray-300 text-xs">{{ form.emergency_services.help_text }}</div>
                        </div>

                        <div class="flex items-center">
                            {{ form.is_verified }}
                            <label for="{{ form.is_verified.id_for_label }}" class="ml-3 text-white">
                                {{ form.is_verified.label }}
                            </label>
                            <div class="ml-2 text-gray-300 text-xs">{{ form.is_verified.help_text }}</div>
                        </div>

                        <div class="flex items-center">
                            {{ form.send_welcome_email }}
                            <label for="{{ form.send_welcome_email.id_for_label }}" class="ml-3 text-white">
                                {{ form.send_welcome_email.label }}
                            </label>
                            <div class="ml-2 text-gray-300 text-xs">{{ form.send_welcome_email.help_text }}</div>
                        </div>
                    </div>
                </div>

                <!-- Submit Section -->
                <div class="flex justify-between items-center pt-6">
                    <a href="{% url 'core:admin_organization_management' %}" class="bg-gray-600 hover:bg-gray-700 text-white px-8 py-3 rounded-lg transition duration-300">
                        <i class="fas fa-times mr-2"></i>Cancel
                    </a>
                    <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg transition duration-300">
                        <i class="fas fa-plus mr-2"></i>Create Organization
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
/* Custom styles for form elements */
.form-control {
    width: 100%;
    padding: 12px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    background-color: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: 14px;
}

.form-control:focus {
    outline: none;
    border-color: rgba(255, 255, 255, 0.6);
    background-color: rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
}

.form-control::placeholder {
    color: rgba(255, 255, 255, 0.6);
}

select.form-control {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 12px center;
    background-repeat: no-repeat;
    background-size: 16px 12px;
    padding-right: 40px;
}

select.form-control option {
    background-color: #374151;
    color: white;
}

textarea.form-control {
    resize: vertical;
    min-height: 80px;
}

input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: #3B82F6;
}
</style>
{% endblock %}
